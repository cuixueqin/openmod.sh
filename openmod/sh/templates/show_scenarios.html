{% extends "base_layout.html" %}
{% block content %}

<!-- interface -->
<div class="tool">
	<header>
		Scenarios
	</header>
	<div class="toolbar">
		<br />
	</div>
	<table class="table table-hover">
	  <thead>
	    <tr>
			<th>Scenario Name</th>
			<th>Show JSON - dataset</th>
			<th>Download JSON - dataset</th>
               <th>Download Results</th>
			<th>Edit Scenaio</th>
			<th>Show Graph</th>
			<th>Delete</th>
	    </tr>
	  </thead>
	  <tbody>

	   {% for k,v in scenarios.items() %}

	    <tr>
	    	<td>{{ scenarios[k]['name'] }}</td>
	    	<td>
			   <form action="{{ url_for('provide_element_api_route') }}"
			         method=get>
			    <input type=submit value="Show" class="btn btn-primary">
			    <input type="hidden" name="id" value="{{k}}">
			    <input type="hidden" name="expand" value="children">
			   </form>
		    </td>
			<td>
	      		<form action="{{ url_for('download') }}" method=get>
				<input type=submit value="Download" class="btn btn-primary">
				<input type="hidden" name="id" value="{{k}}">
				</form>
	      	</td>
                <td>
	      		<form action="{{ url_for('download') }}" method=get>
				<input type=submit value="Download" class="btn btn-primary">
				<input type="hidden" name="id" value="{{k}}">
                    <input type="hidden" name="results" value="true">
				</form>
	      	</td>
			<td>
				<form action="{{ url_for('edit_scenario') }}" method=get>
				<input type=submit value="Edit" class="btn btn-primary">
				<input type="hidden" name="id" value="{{k}}">
				</form>
			</td>
			<td>
				<form action="{{ url_for('plot_graph') }}" method=get>
				<input type=submit value="Show" class="btn btn-primary">
				<input type="hidden" name="id" value="{{k}}">
				</form>
	      	</td>
	      	<td>
				<form action="" method=get onsubmit="deleteScenario({{k}});">
				<input type=submit value="Delete" class="btn btn-primary">
				</form>
	      	</td>
	    </tr>

	    {% endfor %}

	  </tbody>
	</table>
</div>

<script type="text/javascript">

function deleteScenario(scenarioId) {
    var x = confirm("Are you sure you want to delete?");
    if (x) {
        $.ajax({
            url: 'delete' + '?' + $.param({"id": scenarioId}),
            type: 'GET',
            success: function () {alert("Deleted successfully.");},
            error: function () {alert("Error while attempting to delete.");}
        });
    } else {
        return;
    }
}

</script>
{% endblock %}

