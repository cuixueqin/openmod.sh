{% extends "base_layout.html" %}

{% block head %}
{% endblock %}

{% block submenu %}
	<header>
		<div class="row align-items-center">
			<div class="col">
  				<div class="title">Scenarios</div>
			</div>
		</div>
	</header>
{% endblock %}

{% block content %}

			<!-- interface -->
			<div class="card">
				<table class="table table-hover">
					<thead>
					    <tr>
							<th width="30%">Scenario</th>
							<th>Edit</th>
							<th>Get JSON - dataset</th>
				               <th>Get Results</th>
							<th>Delete</th>
					    </tr>
					</thead>
					<tbody>
						{% for k,v in scenarios.items() %}
						<tr>
							<td>{{ scenarios[k]['name'] }}</td>
							<td>
							<form action="{{ url_for('edit_scenario') }}" method=get>
							<input type=submit value="Edit" class="btn btn-primary">
							<input type="hidden" name="id" value="{{k}}">
							</form>
						</td>
							<td>
								<form action="{{ url_for('download') }}" method=get>
									<input type=submit value="Download" class="btn btn-primary">
									<input type="hidden" name="id" value="{{k}}">
								</form>
							</td>
							<td>
								<form action="{{ url_for('download') }}" method=get>
									<input type=submit value="Download" class="btn btn-primary">
									<input type="hidden" name="id" value="{{k}}">
									<input type="hidden" name="results" value="true">
								</form>
							</td>
					      	<td>
								<form action="" method=get onsubmit="deleteScenario({{k}});">
									<input type=submit value="Delete" class="btn btn-secondary">
								</form>
	      					</td>
						</tr>
					    {% endfor %}
					</tbody>
				</table>
			</div>

<!-- Welcone Modal -->
<div class="modal fade" id="welcomeModal" tabindex="-1" role="dialog" aria-labelledby="welcomeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="welcomeModalLabel">Welcome to openMod.sh</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        This is openMod.sh.<br>
        A flexible Open Energy Model for Schleswig-Holstein. <br>
        <br>
        Choose or import a scenario and go for it.
        <br>
        <br>based on oemof<br>
        <div><img src="static/welcomeModal2.png"></div>
        <br>developed at<br>
        <div><img src="static/znes-logo.png"></div>
        <br>funded by<br>
        <div><img src="static/eksh-logo.svg"></div><br>
        <div><img src="static/arge-logo.svg"></div><br>
        <div><img src="static/ihk-logo.jpg"></div><br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>

<script src="/static/helper.js"></script>

<script type="text/javascript">

// open welcome modal when coming from login root redirect
if (document.referrer.split("/").pop() == "login?next=%2F") {
    $('#welcomeModal').modal();
}

function deleteScenario(scenarioId) {
    var x = confirm("Are you sure you want to delete?");
    if (x) {
        $.ajax({
            url: 'delete' + '?' + $.param({"id": scenarioId}),
            type: 'GET',
            success: function () {alert("Deleted successfully.");},
            error: function () {alert("Error while attempting to delete.");}
        });
    } else {
        return;
    }
}

</script>
{% endblock %}

