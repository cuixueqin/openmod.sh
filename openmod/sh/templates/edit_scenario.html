{% extends "base_layout.html" %}
{% block body %}


<div style="float:left; width:50%;">

<h2>Select values</h2>
 <table style="width:50%">
  <tr>
    <td>Solar</td>
    <td>
        <input type="range" min="0" max="50" value="0" step="5"
        onchange="updateValue(this.value, installed_power_solar, '{{id}}')" /></td>
    <td>
        <span id="installed_power_solar">0</span>
    </td>
  </tr>
  <tr>
    <td>Wind</td>
    <td>
        <input type="range" min="0" max="50" value="0" step="5"
        onchange="showValue(this.value, installed_power_wind)" />
    </td>
    <td>
        <span id="installed_power_wind">0</span>
    </td>
  </tr>
</table>
</div>

<div style="float:left; width:50%;">
 <div class="tab">
  <a href="javascript:void(0)" class="tablinks" onclick="openCity(event, 'Region Plot')" id="defaultOpen">Region Plot</a>
  <a href="javascript:void(0)" class="tablinks" onclick="openCity(event, 'Other Plot')">Other Plot</a>
 </div>

 <div id="Region Plot" class="tabcontent">
  <h3>{{id}}</h3>
  <div id="{{id}}"></div>
 </div>

 <div id="Other Plot" class="tabcontent">
  <h3>Other Plot</h3>
  <p>This is another Plot.</p>
 </div>
</div>

<!-- D3.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- Plotly.js -->
<script src="https://cdn.plot.ly/plotly-1.2.0.min.js"></script>

<script type="text/javascript">
    function updateValue(newValue, slider_id, plot_id) {
        showValue(newValue, slider_id);
        makePlot(newValue, plot_id, {{graphJSON | safe}});
    }
    function showValue(newValue, slider_id) {
        slider_id.innerHTML=newValue;
    }
    function makePlot(newValue, plot_id, graph) {
        console.log(graph)
        graph.data[4]['lat'][1]=graph.data[4]['lat'][0]+newValue/100.0;
        Plotly.newPlot(plot_id, // the ID of the div, created above
                    graph.data,
                    graph.layout || {});
    }
</script>

{% endblock %}

{% block footer %}
 <script>
  makePlot(0, "{{id}}", {{graphJSON | safe}})
  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();
 </script>
{% endblock %}
