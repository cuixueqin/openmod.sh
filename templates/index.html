<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/strict.dtd">
<html xmlns="http://www.w3.org/TR/xhtml1/strict" >

<head> <title>openMod.SH</title>
<script src="//code.jquery.com/jquery-2.1.4.js"
        type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.js"
        type="text/javascript"></script>

<link rel="stylesheet" href="http://openlayers.org/en/v3.8.2/css/ol.css"
      type="text/css" />
<style> .map { height: 233px; width: 377px; } </style>
<script src="http://openlayers.org/en/v3.8.2/build/ol.js"
        type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function() {
  $.ajax({ url: "series",
           success: function (d, _, _) {$.plot($("#timeseries-plot"), d);},
           dataType: "json"});

  var map = new ol.Map({
    target: 'map',
    layers: [
      new ol.layer.Tile({source: new ol.source.OSM()})
    ],
    view: new ol.View({
      center: ol.proj.transform([11.618492, 52.117532],
                                'EPSG:4326', 'EPSG:3857'),
      zoom: 4
    })
  });

});

</script>
</head>

<body>
<h1>Welcome to the openMod.sh landing page</h1>

<table>
  <tr><th>Database table</th><th>No. of rows in the table</th></tr>
  <tr><td>Plants</td><td> {{ plants | count }} </td></tr>
  <tr><td>Timeseries</td><td> {{ series | count }} </td></tr>
</table>
<div id="timeseries-plot" style="width:377px;height:233px"></div>

<div id="map" class="map"></div>

</body>

</html>

